# Руководство по системе подсказок

## Обзор

Система подсказок автоматически генерирует три уровня помощи для каждой задачи. За использование каждой подсказки снимаются баллы из финального рейтинга.

## Уровни подсказок

### 1. Поверхностная подсказка (Surface)
- **Штраф**: -5 баллов
- **Содержание**: Общее направление, ключевая идея или паттерн
- **Не раскрывает**: Конкретные шаги реализации
- **Пример**: "Подумай о том, как можно использовать хеш-таблицу для отслеживания частоты элементов"

### 2. Средняя подсказка (Medium)
- **Штраф**: -15 баллов
- **Содержание**: Общий подход, структура данных, основные шаги
- **Не раскрывает**: Детали реализации
- **Пример**: "Используй словарь для подсчета частоты элементов, затем найди элемент с максимальной частотой"

### 3. Глубокая подсказка (Deep)
- **Штраф**: -30 баллов
- **Содержание**: Подробный алгоритм шаг за шагом, важные детали
- **Не раскрывает**: Готовый код
- **Пример**: "1) Создай пустой словарь. 2) Пройди по массиву и для каждого элемента увеличь счетчик. 3) Найди ключ с максимальным значением..."

## Автоматическая генерация

Подсказки генерируются автоматически при создании задачи через `/api/v1/generate-task`.

**Пример ответа:**
```json
{
  "title": "Найти максимальный элемент",
  "description": "...",
  "hints": [
    {
      "level": "surface",
      "content": "Подумай о переборе всех элементов и отслеживании максимума",
      "penalty": 5.0
    },
    {
      "level": "medium",
      "content": "Используй переменную для хранения текущего максимума и обновляй её в цикле",
      "penalty": 15.0
    },
    {
      "level": "deep",
      "content": "1) Инициализируй max_val первым элементом. 2) Пройди по остальным элементам. 3) Если элемент больше max_val, обнови max_val",
      "penalty": 30.0
    }
  ]
}
```

## Влияние на рейтинг

### Формула расчета баллов

```
Базовый балл = (40% × корректность + 20% × качество + 20% × коммуникация + 20% × время) × множитель_сложности × 100

Финальный балл = Базовый балл - Штрафы_за_подсказки
```

### Примеры

**Без подсказок:**
- Базовый балл: 92.4
- Штраф: 0
- **Финальный балл: 92.4**

**С поверхностной подсказкой:**
- Базовый балл: 92.4
- Штраф: -5
- **Финальный балл: 87.4**

**Со всеми подсказками:**
- Базовый балл: 92.4
- Штраф: -5 - 15 - 30 = -50
- **Финальный балл: 42.4**

## API эндпоинты

### POST `/api/v1/hints/generate`
Генерирует подсказки для существующей задачи (если нужно перегенерировать).

**Запрос:**
```json
{
  "task_description": "Найти максимальный элемент в массиве",
  "task_difficulty": "easy",
  "input_format": "Массив целых чисел",
  "output_format": "Максимальный элемент",
  "examples": [
    {"input": "1 2 3", "output": "3"}
  ]
}
```

**Ответ:**
```json
{
  "hints": [
    {
      "level": "surface",
      "content": "...",
      "penalty": 5.0
    },
    {
      "level": "medium",
      "content": "...",
      "penalty": 15.0
    },
    {
      "level": "deep",
      "content": "...",
      "penalty": 30.0
    }
  ]
}
```

### POST `/api/v1/score`
При расчете баллов передайте использованные подсказки.

**Запрос:**
```json
{
  "difficulty": "medium",
  "tests_passed": 8,
  "total_tests": 10,
  "time_taken_seconds": 300,
  "code_quality_score": 75,
  "communication_score": 80,
  "hints_used": ["surface", "medium"]
}
```

**Ответ:**
```json
{
  "final_score": 72.4
}
```
(92.4 - 5 - 15 = 72.4)

## Рекомендации по использованию

### Для кандидатов:
1. **Попробуйте сначала сами** - подсказки снижают рейтинг
2. **Используйте постепенно** - начните с поверхностной
3. **Читайте внимательно** - каждая подсказка дает важную информацию

### Для интервьюеров:
1. **Отслеживайте использование** - это показатель самостоятельности
2. **Учитывайте контекст** - сложность задачи влияет на необходимость подсказок
3. **Анализируйте паттерны** - частое использование может указывать на пробелы в знаниях

## Тестирование

```bash
# Запустить тестовый скрипт
./test_hints.sh

# Или вручную
curl -X POST "http://localhost:8001/api/v1/generate-task" \
  -H "Content-Type: application/json" \
  -d '{"difficulty": "easy"}' | jq '.hints'
```

## Штрафная таблица

| Подсказки | Штраф | Остаток от 100 баллов |
|-----------|-------|----------------------|
| Нет | 0 | 100 |
| Surface | -5 | 95 |
| Surface + Medium | -20 | 80 |
| Все три | -50 | 50 |

**Важно:** Штрафы вычитаются из финального балла после применения всех множителей и бонусов.
